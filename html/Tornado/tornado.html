<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Détails du Projet | Moteur Vulkan</title>
    <link rel="stylesheet" href="../../css/annexe.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body class="project-detail-page">

    <nav class="detail-nav">
        <a href="/index.html" class="back-btn">
            <span class="arrow">←</span>
            <span class="text">Retour au portfolio</span>
        </a>
    </nav>

    <main class="detail-container">
        <header class="detail-header">
            <h1>Simulation d'une tornade dans un environnement 3D</h1>
            <div class="badge-container">
                <span class="badge" data-i18n="maths">Mathématiques</span>
                <span class="badge">UE5</span>
                <span class="badge" data-i18n="duration-1w">1 semaine</span>
                <span class="badge" data-i18n="side-project">Projet Perso</span>
            </div>
        </header>

        <section class="detail-content text-full">
            <div class="detail-text">
                <h2>Desciption et Objectifs du projet</h2>
                <br>    
                <p>L'objectif était de faire une simulation d'une tornade dans un environnement 3D, incluant la modélisation des forces et des mouvements associés. Le projet vise à simuler le comportement dynamique d'une tornade en utilisant les équations de Burgers-Rott, dans un environnement réaliste. Le projet a été développé à l’aide du moteur de jeu Unreal Engine 5.6.</p>
                <br>
                <h2>Défis Mathématiques</h2>
                <br>
                <p>- Appliquer les équations de Burgers-Rott sur Unreal Engine<br>
                   - Représenter le "bruit" de la tornade à l'aide d'une force de turbulence<br>
                   - Calculer le facteur d'évasement de la tornade pour une représentation plus réaliste<br>
                   - Transiter d'un état d'aspiration à un état d'expulsion</p>
            </div>
        </section>

        <section class="detail-content text-full">
            <div class="detail-text">
                <h2>Représentation visuelle</h2>
            </div>
        </section>
        <section class="detail-video">
            <video class="hero-video" controls preload="metadata" poster="tornado_poster.jpg">
                <source src="tornado_demo.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la lecture vidéo.
            </video>
        </section>

        <section class="text-top-img-bottom">
            <div class="content">
                <h2>Comment fonctionne la tornade ?</h2>
                <p>
                    Concrètement, une tornade possède plusieurs caractéristiques physiques distinctes, telles que la rotation rapide de l'air, une pression atmosphérique basse au centre, et des forces de turbulence qui influencent son comportement dynamique.
                    Dans ce projet, je me suis concentré sur 4 facteurs physiques majeurs.<br><br>
                </p>
                <h3>Le bruit</h3>
                <pre><code>
<span class="type">float</span> <span class="variable">time</span> = <span class="variable">DeltaTime</span> * 0.5f;
<span class="type">FVector</span> <span class="variable">Noise</span> = <span class="className">FVector</span>(
<span class="className">FMath</span>::<span class="function">PerlinNoise2D</span>(<span class="className">FVector2D</span>(<span class="variable">elementPos</span>.X + <span class="variable">time</span>, <span class="variable">elementPos</span>.Y)) * 0.5f,
0.0f,
<span class="className">FMath</span>::<span class="function">PerlinNoise2D</span>(<span class="className">FVector2D</span>(<span class="variable">elementPos</span>.Z, <span class="variable">elementPos</span>.Y + <span class="variable">time</span>)) * 0.5f
);
<span class="variable">Noise</span> *= <span class="variable">TurbulenceStrength</span>;
                </code></pre>
                <h3>Le gamma (force de rotation)</h3>
                <pre><code>
<span class="comment">//Paramètres initiaux</span>
<span class="type">FVector</span> <span class="variable">transformPos</span> = <span class="variable">spellPos</span>;
<span class="type">float</span> <span class="variable">z</span> = <span class="variable">elementPos</span>.Z - <span class="variable">transformPos</span>.Z;

<span class="variable">elementPos</span>.Z = 0;
<span class="variable">transformPos</span>.Z = 0;

<span class="type">float</span> <span class="variable">dist</span> = <span class="className">FVector</span>::<span class="function">Distance</span>(<span class="variable">elementPos</span>, <span class="variable">transformPos</span>);

<span class="className">FVector</span> <span class="variable">radial</span> = <span class="variable">elementPos</span> - <span class="variable">transformPos</span>;
<span class="variable">radial</span>.<span class="function">Normalize</span>();
<span class="className">FVector</span> <span class="variable">tangential</span> = <span class="className">FVector</span>::UpVector.<span class="function">Cross</span>(<span class="variable">radial</span>);

<span class="type">float</span> <span class="variable">height</span> = <span class="className">FMath</span>::<span class="function">Max</span>(0.f, <span class="variable">z</span>);
<span class="type">float</span> <span class="variable">height01</span> = <span class="className">FMath</span>::<span class="function">Clamp</span>(<span class="variable">height</span> / <span class="variable">TornadoHeight</span>, 0.f, 1.f);

<span class="comment">// Calcul du gamma en fonction de la hauteur</span>
<span class="type">float</span> <span class="variable">gammaAtHeight</span> = <span class="className">FMath</span>::<span class="function">Lerp</span>(
<span class="variable">GammaBase</span>, 
<span class="variable">GammaTop</span>, 
<span class="className">FMath</span>::<span class="function">Pow</span>(<span class="variable">height01</span>, <span class="variable">GammaExponent</span>)
);
                </code></pre>
                <h3>L'écoulement (ou "champ de vitesse")</h3>
                <p>
                    Il est modélisé à l'aide des 3 éléments majeurs qui forment une tornade : la vitesse radiale \( V_r \), la vitesse tangente \( V_t \) et la vitesse verticale \( V_z \).<br><br>
                </p>
                <pre><code>
<span class="comment">//On passe de l'aspiration (-Vr) à l'expulsion (+Vr)</span>
<span class="type">float</span> <span class="variable">Suction</span> = -<span class="variable">A</span> * <span class="variable">dist</span>;
<span class="type">float</span> <span class="variable">PushOut</span> = <span class="variable">A</span> * <span class="variable">dist</span> * <span class="variable">FlareStrength</span>;

<span class="type">float</span> <span class="variable">Vtheta</span> = <span class="variable">gammaAtHeight</span> / (2 * <span class="type">PI</span> * <span class="variable">dist</span>) * (1 - <span class="className">FMath</span>::<span class="function">Exp</span>(<span class="variable">A</span> * <span class="variable">dist</span> * <span class="variable">dist</span> / (2 * Nu)));
<span class="type">float</span> <span class="variable">Vz</span> = 2 * <span class="variable">A</span> * <span class="variable">z</span>;
<span class="comment">// Calcul du facteur d'évasement (0 en bas, 1 tout en haut avec une transition douce)</span>
<span class="type">float</span> <span class="variable">t</span> = <span class="className">FMath</span>::<span class="function">Clamp</span>((<span class="variable">height01</span> - <span class="variable">OutflowHeightStart</span>) / (1.0 - <span class="variable">OutflowHeightStart</span>), 0.0, 1.0);
<span class="comment">//Formule du smoothStep</span>
<span class="type">float</span> <span class="variable">FlareFactor</span> = <span class="variable">t</span> * <span class="variable">t</span> * (3.0 - 2.0 * <span class="variable">t</span>);

<span class="comment">//On combine les vitesses pour obtenir la vitesse finale de chaque composante</span>
<span class="type">float</span> <span class="variable">FinalVr</span> = <span class="className">FMath</span>::<span class="function">Lerp</span>(<span class="variable">Suction</span>, <span class="variable">PushOut</span>, <span class="variable">FlareFactor</span>);
<span class="type">float</span> <span class="variable">FinalVtheta</span> = <span class="variable">Vtheta</span> * (1.0 - (<span class="variable">FlareFactor</span> * 0.5));
<span class="type">float</span> <span class="variable">FinalVz</span> = <span class="variable">Vz</span> * (1.0 - <span class="variable">FlareFactor</span>);
                </code></pre>
                <br>
                <p>
                    La vitesse finale du flux d'air à une position donnée est obtenue en combinant ces trois composantes vectorielles.<br><br>
                </p>
                <pre><code>
<span class="className">FVector</span> <span class="variable">BaseVelocity</span> = <span class="variable">FinalVr</span> * <span class="variable">radial</span> + <span class="variable">FinalVtheta</span> * <span class="variable">tangential</span> + <span class="variable">FinalVz</span> * <span class="className">FVector</span>::UpVector;
                </code></pre>
                <br>
                </div>
        </section>
        <section class="detail-content text-full">
            <div class="detail-text">
                <h2>Ouverture</h2>
                <p>
                    Maintenant que la représentation visuelle de la tornade est fonctionnelle / réaliste, il ne reste plus qu'à créer les interactions avec les objets environnants. Et c'est ce qui sera continué dans un futur projet !
                </p>
            </div>
        </section>
    </main>
</body>
</html>